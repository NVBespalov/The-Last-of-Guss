# 7 User Stories и Acceptance Criteria

## 7.1. Тап – начисление очков игроку

**User Story:**  
Как обычный игрок,  
Я хочу иметь возможность тапать во время активного раунда,  
Чтобы за мои действия мне начислялись очки.

**Критерии приёмки:**
- Пока раунд в статусе `active`, каждый мой тап увеличивает мой счет на 1.
- Если я отправил тап вне активного раунда или во время cooldown — мой счет не меняется.
- Если мой логин не входит в список игнорируемых — я получаю очки.

---

## 7.2. Игнорирование начисления очков для Никиты и других указанных пользователей

**User Story:**  
Как пользователь, включённый в список игнорируемых (например, Никита),  
Я хочу, чтобы мои тапы не учитывались системой вообще,  
Чтобы участвовать в раундах формально, не влияя на результаты.

**Критерии приёмки:**
- Если мой логин в списке `ignoredUserIds` текущего или глобального раунда, любые мои тапы не изменяют счет.
- При попытке посмотреть свой результат по раунду — всегда вижу 0 очков и/или явное указание на игнорирование (`excluded: true`).

---

## 7.3. Старт и завершение раунда

**User Story:**  
Как администратор,  
Я хочу запускать/завершать раунды вручную или автоматически по времени,  
Чтобы контролировать длительность и момент старта/финиша.

**Критерии приёмки:**
- Только я (админ) могу вызвать старт/завершение раунда через админ-интерфейс.
- При старте раунда всем участникам обнуляется счет, формируется актуальный список игнорируемых.
- Завершённый раунд фиксирует результаты по всем неигнорируемым пользователям.

---

## 7.4. Настройка игнорируемых пользователей

**User Story:**  
Как администратор,  
Я хочу иметь возможность указать список пользователей, которых не нужно учитывать при подсчёте очков (глобально или для конкретного раунда),  
Чтобы не считать результаты тестовым или бот-аккаунтам.

**Критерии приёмки:**
- Я могу задать/отредактировать список игнорируемых пользователей в конфиге или в интерфейсе перед стартом раунда.
- Такие пользователи не получают очки вне зависимости от времени и количества тапов.
- Список может быть расширен по ходу работы сервиса.

---

## 7.5. Запрет тапов вне активного раунда

**User Story:**  
Как игрок,  
Я хочу получать ошибку или уведомление, если пытаюсь тапнуть вне активного раунда,  
Чтобы понимать, что сейчас мои действия не засчитываются.

**Критерии приёмки:**
- Если я тапаю до начала или после завершения раунда, либо во время cooldown, сервер возвращает мне ошибку (статус или флаг).
- Мой счет при этом не изменяется.

---

## 7.6. Масштабируемость и консистентность

**User Story:**  
Как игрок или админ,  
Я хочу, чтобы сервер корректно подсчитывал очки при любых нагрузках и не было "двойных" начислений независимо от количества серверов,  
Чтобы результаты были честными, а система — отказоустойчивой.

**Критерии приёмки:**
- При одновременных тапах от одного игрока (или группы игроков) счет увеличивается ровно на количество успешных запросов.
- Никакой пользователь не может получить больше очков за один тап из-за ошибок синхронизации между серверами.
- Серверы используют общую БД и обеспечивают транзакционность операций.

---

## 7.7. Доступ к статистике и истории

**User Story:**  
Как игрок или админ,  
Я хочу иметь возможность видеть свою историю набранных очков и финальные счета раундов,  
Чтобы отслеживать свой прогресс и видеть результаты других.

**Критерии приёмки:**
- Я могу получить свою историю очков по раундам в API.
- Админ может запросить сводку по любому игроку и раунду.
- Для игнорируемых пользователей в статистике всегда отражается 0 очков.
