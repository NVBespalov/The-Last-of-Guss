# Тест-кейсы: Управление раундами

## Создание и запуск раундов

### TC-ROUND-001: Создание нового раунда администратором

- **Связанные User Stories**: US-04
- **Приоритет**: P0
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - В данный момент нет активного раунда

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Нажать кнопку "Создать новый раунд"
    3. Ввести название раунда: "Тестовый раунд 1"
    4. Ввести длительность: 5 минут
    5. Выбрать опцию "Немедленный запуск"
    6. Нажать кнопку "Создать"

- **Ожидаемый результат**:
    - Раунд успешно создан и запущен
    - В системе отображается активный раунд с указанным названием
    - Отображается обратный отсчет времени раунда
    - Игрокам доступна возможность совершать тапы

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E и Integration тесты

### TC-ROUND-002: Создание отложенного раунда

- **Связанные User Stories**: US-04
- **Приоритет**: P1
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - В данный момент нет активного раунда

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Нажать кнопку "Создать новый раунд"
    3. Ввести название раунда: "Отложенный раунд"
    4. Ввести длительность: 10 минут
    5. Выбрать опцию "Запланировать на определенное время"
    6. Указать дату и время начала: текущая дата + 1 час
    7. Нажать кнопку "Создать"

- **Ожидаемый результат**:
    - Раунд успешно создан и помечен как "Запланирован"
    - В системе отображается запланированный раунд с указанным названием и временем начала
    - Раунд автоматически запускается в указанное время

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration тесты

### TC-ROUND-003: Попытка создания раунда при наличии активного раунда

- **Связанные User Stories**: US-04
- **Приоритет**: P1
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - В системе уже есть активный раунд

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Нажать кнопку "Создать новый раунд"
    3. Ввести название раунда: "Новый раунд"
    4. Ввести длительность: 5 минут
    5. Нажать кнопку "Создать"

- **Ожидаемый результат**:
    - Создание нового раунда не выполнено
    - Отображается предупреждение: "Невозможно создать новый раунд при наличии активного раунда"
    - Предлагается завершить текущий активный раунд

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Unit и E2E тесты

## Завершение раундов

### TC-ROUND-004: Ручное завершение раунда администратором

- **Связанные User Stories**: US-05
- **Приоритет**: P0
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - В системе есть активный раунд

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Найти активный раунд в списке
    3. Нажать кнопку "Завершить раунд"
    4. В диалоговом окне подтверждения нажать "Подтвердить"

- **Ожидаемый результат**:
    - Раунд успешно завершен
    - Статус раунда изменен на "Завершен"
    - Игроки больше не могут совершать тапы в этом раунде
    - Отображается итоговая таблица результатов раунда

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E и Integration тесты

### TC-ROUND-005: Автоматическое завершение раунда по истечении времени

- **Связанные User Stories**: US-05
- **Приоритет**: P0
- **Предусловия**:
    - В системе есть активный раунд с оставшимся временем 1 минута

- **Шаги**:
    1. Открыть страницу активного раунда
    2. Дождаться истечения таймера раунда

- **Ожидаемый результат**:
    - По истечении времени раунд автоматически завершается
    - Статус раунда изменен на "Завершен"
    - Игроки больше не могут совершать тапы в этом раунде
    - Отображается уведомление о завершении раунда
    - Отображается итоговая таблица результатов

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration тесты (с эмуляцией времени)

### TC-ROUND-006: Просмотр истории завершенных раундов

- **Связанные User Stories**: US-05, US-08
- **Приоритет**: P1
- **Предусловия**:
    - Пользователь авторизован с ролью администратора или модератора
    - В системе есть несколько завершенных раундов

- **Шаги**:
    1. Перейти в раздел "История раундов"
    2. Просмотреть список завершенных раундов

- **Ожидаемый результат**:
    - Отображается список всех завершенных раундов
    - Для каждого раунда показана информация: название, дата начала, продолжительность, количество участников, победитель
    - Список можно сортировать и фильтровать
    - При клике на раунд открывается детальная информация о нем

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E тест

## Cooldown период

### TC-ROUND-007: Соблюдение cooldown периода между раундами

- **Связанные User Stories**: US-06
- **Приоритет**: P1
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - Раунд был завершен менее 5 минут назад (cooldown период)

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Нажать кнопку "Создать новый раунд"
    3. Ввести название раунда: "Тестовый раунд 2"
    4. Ввести длительность: 5 минут
    5. Нажать кнопку "Создать"

- **Ожидаемый результат**:
    - Создание нового раунда не выполнено
    - Отображается предупреждение: "Невозможно создать новый раунд во время cooldown периода"
    - Отображается оставшееся время до окончания cooldown периода

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration тест (с эмуляцией времени)

### TC-ROUND-008: Создание раунда после истечения cooldown периода

- **Связанные User Stories**: US-06
- **Приоритет**: P1
- **Предусловия**:
    - Пользователь авторизован с ролью администратора
    - Раунд был завершен более 5 минут назад (cooldown период истек)

- **Шаги**:
    1. Перейти в раздел "Управление раундами"
    2. Нажать кнопку "Создать новый раунд"
    3. Ввести название раунда: "Тестовый раунд после cooldown"
    4. Ввести длительность: 5 минут
    5. Нажать кнопку "Создать"

- **Ожидаемый результат**:
    - Раунд успешно создан
    - В системе отображается активный раунд с указанным названием
    - Игрокам доступна возможность совершать тапы

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration тест (с эмуляцией времени)

## Информация о раунде

### TC-ROUND-009: Просмотр детальной информации о раунде

- **Связанные User Stories**: US-08
- **Приоритет**: P2
- **Предусловия**:
    - Пользователь авторизован с любой ролью
    - В системе есть завершенный раунд с ID "round-123"

- **Шаги**:
    1. Перейти в раздел "История раундов"
    2. Найти раунд с ID "round-123"
    3. Нажать на название раунда или кнопку "Подробнее"

- **Ожидаемый результат**:
    - Открывается страница с детальной информацией о раунде
    - Отображается: название, даты начала и окончания, продолжительность, количество участников
    - Отображается таблица с результатами участников (имя, количество тапов, очки)
    - Отображается график активности тапов в течение раунда

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E тест

### TC-ROUND-010: Экспорт результатов раунда

- **Связанные User Stories**: US-08
- **Приоритет**: P2
- **Предусловия**:
    - Пользователь авторизован с ролью администратора или модератора
    - Открыта страница детальной информации о завершенном раунде

- **Шаги**:
    1. Нажать кнопку "Экспорт результатов"
    2. В диалоговом окне выбрать формат экспорта: CSV
    3. Нажать "Скачать"

- **Ожидаемый результат**:
    - Начинается скачивание файла с результатами раунда в выбранном формате
    - Файл содержит корректные данные: список участников, их результаты и статистику

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration тест