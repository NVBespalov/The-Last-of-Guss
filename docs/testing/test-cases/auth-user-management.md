# Тест-кейсы: Авторизация и управление пользователями

## Регистрация пользователей

### TC-AUTH-001: Регистрация нового пользователя с ролью игрока

- **Связанные User Stories**: US-01
- **Приоритет**: P0
- **Предусловия**: 
  - Открыта страница регистрации
  - Пользователь с указанным email не существует в системе

- **Шаги**:
  1. Ввести имя пользователя: "testplayer"
  2. Ввести email: "testplayer@example.com"
  3. Ввести пароль: "SecurePass123!"
  4. Подтвердить пароль: "SecurePass123!"
  5. Выбрать роль "Игрок"
  6. Нажать кнопку "Зарегистрироваться"

- **Ожидаемый результат**:
  - Пользователь успешно зарегистрирован
  - Отображается сообщение об успешной регистрации
  - Пользователь перенаправлен на страницу входа

- **Среда тестирования**: Браузер Chrome, v120+
- **Автоматизация**: Да, E2E тест

### TC-AUTH-002: Регистрация нового пользователя с ролью администратора

- **Связанные User Stories**: US-01
- **Приоритет**: P0
- **Предусловия**: 
  - Открыта страница регистрации
  - Пользователь с указанным email не существует в системе
  - Текущий пользователь имеет права администратора

- **Шаги**:
  1. Ввести имя пользователя: "testadmin"
  2. Ввести email: "testadmin@example.com"
  3. Ввести пароль: "AdminPass123!"
  4. Подтвердить пароль: "AdminPass123!"
  5. Выбрать роль "Администратор"
  6. Нажать кнопку "Зарегистрироваться администратора"

- **Ожидаемый результат**:
  - Пользователь успешно зарегистрирован с ролью администратора
  - Отображается сообщение об успешной регистрации
  - Новый администратор отображается в списке администраторов

- **Среда тестирования**: Браузер Chrome, v120+
- **Автоматизация**: Да, E2E тест

### TC-AUTH-003: Попытка регистрации с существующим email

- **Связанные User Stories**: US-01
- **Приоритет**: P1
- **Предусловия**: 
  - Открыта страница регистрации
  - В системе уже существует пользователь с email "existing@example.com"

- **Шаги**:
  1. Ввести имя пользователя: "newuser"
  2. Ввести email: "existing@example.com"
  3. Ввести пароль: "Password123!"
  4. Подтвердить пароль: "Password123!"
  5. Нажать кнопку "Зарегистрироваться"

- **Ожидаемый результат**:
  - Регистрация не выполнена
  - Отображается сообщение об ошибке: "Пользователь с таким email уже существует"
  - Пользователь остается на странице регистрации

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Unit/Integration тест

## Аутентификация

### TC-AUTH-004: Вход в систему с правильными учетными данными

- **Связанные User Stories**: US-02
- **Приоритет**: P0
- **Предусловия**: 
  - Открыта страница входа
  - В системе существует пользователь с email "user@example.com" и паролем "Password123!"

- **Шаги**:
  1. Ввести email: "user@example.com"
  2. Ввести пароль: "Password123!"
  3. Нажать кнопку "Войти"

- **Ожидаемый результат**:
  - Вход в систему выполнен успешно
  - Пользователь перенаправлен на главную страницу или дашборд
  - В системе создана активная сессия пользователя

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E тест

### TC-AUTH-005: Попытка входа с неправильным паролем

- **Связанные User Stories**: US-02
- **Приоритет**: P1
- **Предусловия**: 
  - Открыта страница входа
  - В системе существует пользователь с email "user@example.com" и паролем "Password123!"

- **Шаги**:
  1. Ввести email: "user@example.com"
  2. Ввести пароль: "WrongPassword"
  3. Нажать кнопку "Войти"

- **Ожидаемый результат**:
  - Вход в систему не выполнен
  - Отображается сообщение об ошибке: "Неверный email или пароль"
  - Пользователь остается на странице входа

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E и Unit тесты

### TC-AUTH-006: Выход из системы

- **Связанные User Stories**: US-02
- **Приоритет**: P1
- **Предусловия**: 
  - Пользователь авторизован в системе
  - Открыта любая страница приложения

- **Шаги**:
  1. Нажать на иконку профиля в верхнем правом углу
  2. В выпадающем меню выбрать "Выйти"

- **Ожидаемый результат**:
  - Сессия пользователя завершена
  - Пользователь перенаправлен на страницу входа
  - При попытке доступа к защищенным страницам происходит перенаправление на страницу входа

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E тест

## Управление пользователями

### TC-AUTH-007: Просмотр списка пользователей администратором

- **Связанные User Stories**: US-03
- **Приоритет**: P1
- **Предусловия**: 
  - Пользователь авторизован с ролью администратора
  - В системе существует несколько пользователей

- **Шаги**:
  1. Перейти в раздел "Управление пользователями"
  2. Просмотреть список пользователей

- **Ожидаемый результат**:
  - Отображается список всех пользователей системы
  - Для каждого пользователя показана информация: имя, email, роль, статус
  - Список можно сортировать и фильтровать

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E тест

### TC-AUTH-008: Изменение роли пользователя администратором

- **Связанные User Stories**: US-03
- **Приоритет**: P1
- **Предусловия**: 
  - Пользователь авторизован с ролью администратора
  - В системе существует пользователь "user@example.com" с ролью "Игрок"

- **Шаги**:
  1. Перейти в раздел "Управление пользователями"
  2. Найти пользователя "user@example.com" в списке
  3. Нажать кнопку "Редактировать" для этого пользователя
  4. В выпадающем списке ролей выбрать "Модератор"
  5. Нажать кнопку "Сохранить"

- **Ожидаемый результат**:
  - Роль пользователя успешно изменена
  - В списке пользователей отображается новая роль "Модератор"
  - Отображается уведомление об успешном изменении роли

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, E2E и Integration тесты

### TC-AUTH-009: Блокировка пользователя администратором

- **Связанные User Stories**: US-03
- **Приоритет**: P1
- **Предусловия**: 
  - Пользователь авторизован с ролью администратора
  - В системе существует активный пользователь "user@example.com"

- **Шаги**:
  1. Перейти в раздел "Управление пользователями"
  2. Найти пользователя "user@example.com" в списке
  3. Нажать кнопку "Заблокировать" для этого пользователя
  4. В диалоговом окне подтверждения нажать "Подтвердить"

- **Ожидаемый результат**:
  - Пользователь успешно заблокирован
  - В списке пользователей статус пользователя изменен на "Заблокирован"
  - Заблокированный пользователь не может войти в систему

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration и E2E тесты

### TC-AUTH-010: Разблокировка пользователя администратором

- **Связанные User Stories**: US-03
- **Приоритет**: P2
- **Предусловия**: 
  - Пользователь авторизован с ролью администратора
  - В системе существует заблокированный пользователь "blocked@example.com"

- **Шаги**:
  1. Перейти в раздел "Управление пользователями"
  2. Найти пользователя "blocked@example.com" в списке
  3. Нажать кнопку "Разблокировать" для этого пользователя
  4. В диалоговом окне подтверждения нажать "Подтвердить"

- **Ожидаемый результат**:
  - Пользователь успешно разблокирован
  - В списке пользователей статус пользователя изменен на "Активен"
  - Разблокированный пользователь может войти в систему

- **Среда тестирования**: Все поддерживаемые браузеры
- **Автоматизация**: Да, Integration и E2E тесты