# План тестирования

## Содержание

1. [Обзор](#обзор)
2. [Объекты тестирования](#объекты-тестирования)
3. [Стратегия тестирования](#стратегия-тестирования)
4. [Критерии входа и выхода](#критерии-входа-и-выхода)
5. [Ресурсы](#ресурсы)
6. [Расписание](#расписание)
7. [Риски и их снижение](#риски-и-их-снижение)
8. [Отчетность](#отчетность)

## Обзор

### Цель документа
Данный план тестирования описывает общий подход к тестированию системы подсчета очков, определяет процедуры, ресурсы и методы тестирования для обеспечения качества продукта.

### Область применения
План охватывает все виды тестирования, включая модульное, интеграционное, системное и приемочное тестирование, а также тестирование производительности и безопасности.

### Связанные документы
- [Стратегия тестирования](testing-strategy.md)
- [Виды тестов](test-types.md)
- [Инструменты для тестирования](testing-tools.md)
- [Руководство по тестированию](../guides/testing-guide.md)
- [Требования к системе](../srs/00-intro.md)

## Объекты тестирования

### Основные модули
1. **Модуль аутентификации и авторизации**
    - Регистрация пользователей
    - Авторизация с различными ролями
    - Управление сессиями

2. **Модуль управления раундами**
    - Запуск и завершение игровых раундов
    - Установка параметров раунда
    - Cooldown периоды

3. **Модуль подсчета очков**
    - Регистрация тапов
    - Расчет очков по бизнес-правилам
    - Игнорирование определенных пользователей

4. **Модуль статистики и отчетов**
    - Сбор и хранение статистики
    - Формирование отчетов
    - Экспорт данных

5. **Интерфейс пользователя**
    - Доступность и удобство использования
    - Адаптивность
    - Соответствие дизайн-системе

### Интеграции
1. **База данных**
    - Корректность работы с PostgreSQL
    - Миграции и обновления схемы

2. **Внешние API**
    - Интеграция с аналитическими системами
    - Интеграция с системами оповещений

3. **Многосерверная архитектура**
    - Консистентность данных между серверами
    - Балансировка нагрузки

## Стратегия тестирования

### Уровни тестирования

| Уровень           | Ответственные       | Инструменты        | Критерии успеха                 |
|-------------------|---------------------|--------------------|---------------------------------|
| Модульное         | Разработчики        | Jest               | Покрытие > 80%, все тесты проходят |
| Интеграционное    | Разработчики, QA    | Supertest          | Все интеграции работают корректно |
| Системное         | QA                  | Cypress, Playwright| Все бизнес-сценарии выполняются  |
| Приемочное        | QA, Product Owner   | Ручное тестирование| Соответствие требованиям        |
| Производительность | DevOps, QA          | k6, JMeter         | Отклик < 200ms, 1000 RPS       |
| Безопасность      | Security Engineer   | OWASP ZAP          | Отсутствие критических уязвимостей |

### Типы тестирования

| Тип тестирования      | Описание                                                   | Частота                      |
|-----------------------|------------------------------------------------------------|------------------------------|
| Регрессионное         | Проверка существующей функциональности после изменений     | При каждом PR                |
| Дымовое               | Базовая проверка основных функций                          | После каждого деплоя         |
| Нагрузочное           | Проверка производительности под нагрузкой                  | Перед мажорными релизами     |
| Стресс-тестирование   | Проверка поведения системы при экстремальных нагрузках     | Ежеквартально                |
| Тестирование безопасности | Поиск уязвимостей и проблем безопасности               | Ежемесячно                   |
| Тестирование доступности | Проверка соответствия стандартам доступности WCAG       | Перед мажорными релизами     |
| A/B тестирование      | Сравнение различных вариантов реализации                   | По необходимости             |

### Автоматизация тестирования

**Приоритеты автоматизации**:
1. Критические бизнес-процессы
2. Регрессионные тесты для часто используемых функций
3. Тесты производительности
4. Smoke-тесты для основных функций

**Стратегия автоматизации**:
- Автоматизация на уровне модулей (Unit)
- Автоматизация API-тестов
- Автоматизация основных пользовательских сценариев
- Использование контейнеризации для воспроизводимости тестового окружения

## Критерии входа и выхода

### Критерии входа для тестирования

- Код успешно собирается без ошибок
- Пройдены все статические проверки кода (линтинг, типизация)
- Документация обновлена в соответствии с изменениями
- Тестовое окружение настроено и готово к использованию
- Тестовые данные подготовлены

### Критерии выхода из тестирования

- 100% тестов выполнены
- Все критические и высокоприоритетные дефекты исправлены
- 95% тестов среднего приоритета пройдены успешно
- Документация по тестированию обновлена
- Покрытие кода соответствует установленным порогам

### Критерии приостановки и возобновления

**Приостановка тестирования**:
- Критические дефекты, блокирующие дальнейшее тестирование
- Недоступность тестового окружения
- Серьезные изменения требований

**Возобновление тестирования**:
- Критические дефекты устранены
- Тестовое окружение восстановлено
- Требования стабилизированы

## Ресурсы

### Команда тестирования

| Роль                | Количество | Ответственности                                        |
|---------------------|------------|--------------------------------------------------------|
| QA Lead             | 1          | Планирование, координация и контроль качества          |
| QA Engineer         | 2          | Ручное тестирование, разработка тест-кейсов            |
| Automation QA       | 2          | Разработка и поддержка автоматических тестов           |
| Performance Engineer| 1          | Нагрузочное тестирование и оптимизация                 |
| Security Tester     | 1          | Тестирование безопасности                              |

### Тестовые среды

| Среда       | Назначение                                   | Обновление                    |
|-------------|----------------------------------------------|-------------------------------|
| Development | Тестирование в процессе разработки           | При каждом коммите            |
| Test        | Системное и интеграционное тестирование      | После успешной сборки         |
| Staging     | Приемочное и нагрузочное тестирование        | Перед релизом в production    |
| Production  | Мониторинг и дымовое тестирование            | По плану релизов              |

### Инструменты

Полный список инструментов, используемых для тестирования, доступен в документе [Инструменты для тестирования](testing-tools.md).

## Расписание

### Ключевые этапы

| Этап                                      | Дата начала  | Дата окончания | Ответственный    |
|-------------------------------------------|--------------|----------------|------------------|
| Разработка тестовой стратегии             | 2025-01-15   | 2025-01-20     | QA Lead          |
| Разработка тест-плана                     | 2025-01-21   | 2025-01-31     | QA Lead          |
| Создание тестовых сценариев               | 2025-02-01   | 2025-02-15     | QA Engineers     |
| Разработка автоматических тестов          | 2025-02-15   | 2025-03-15     | Automation QA    |
| Настройка тестовых окружений              | 2025-02-01   | 2025-02-10     | DevOps           |
| Тестирование MVP                          | 2025-03-16   | 2025-03-31     | QA Team          |
| Тестирование производительности           | 2025-04-01   | 2025-04-15     | Performance Eng. |
| Тестирование безопасности                 | 2025-04-15   | 2025-04-30     | Security Tester  |
| Приемочное тестирование                   | 2025-05-01   | 2025-05-15     | QA Lead, PO      |
| Регрессионное тестирование перед релизом  | 2025-05-16   | 2025-05-31     | QA Team          |
| Релиз v1.0                                | 2025-06-01   | 2025-06-01     | Вся команда      |

### Циклы тестирования

- **Ежедневное**: Модульные тесты, дымовые тесты
- **Еженедельное**: Интеграционные тесты, регрессионные тесты
- **Перед релизом**: Полное регрессионное тестирование, производительность, безопасность

## Риски и их снижение

| Риск                                      | Вероятность | Влияние | Стратегия снижения                              |
|-------------------------------------------|-------------|---------|--------------------------------------------------|
| Нехватка времени на полное тестирование   | Средняя     | Высокое | Приоритизация тестов, автоматизация ключевых сценариев |
| Изменение требований в процессе разработки| Высокая     | Среднее | Гибкий подход к тестированию, регулярное обновление тест-планов |
| Проблемы с тестовыми окружениями          | Средняя     | Высокое | Контейнеризация, мониторинг состояния окружений  |
| Недостаточная производительность системы  | Средняя     | Высокое | Раннее и регулярное тестирование производительности |
| Уязвимости безопасности                   | Низкая      | Высокое | Регулярное сканирование, обзоры кода            |

## Отчетность

### Метрики тестирования

- Покрытие тестами (по коду, по требованиям)
- Количество и серьезность обнаруженных дефектов
- Распределение дефектов по модулям
- Время, затраченное на исправление дефектов
- Успешность регрессионных тестов
- Метрики производительности (отклик, пропускная способность)

### Формат отчетов

**Ежедневный отчет**:
- Статус выполнения запланированных тестов
- Обнаруженные дефекты
- Блокирующие проблемы

**Еженедельный отчет**:
- Прогресс тестирования
- Метрики покрытия
- Тенденции в обнаружении дефектов
- Риски и проблемы

**Отчет о релизе**:
- Полное покрытие требований
- Общий статус качества
- Остаточные риски
- Рекомендации по релизу
